import{_ as F,r as n,u as L,a as B,m as C,o as m,b as f,d as s,w as D,e as w,v as b,t as x,f as y,F as G,p as U,g as A}from"./index-CLchnhFy.js";import{_ as M}from"./library_1-Dnzs1S06.js";import{g as N,o as P,a as T}from"./index-a694d6c6-DkYcy7Jf.js";import"./index.esm2017-CJ2sl82q.js";import{a as V,d as R,b as j}from"./init-B6bwGzn1.js";const l=i=>(U("data-v-855c4057"),i=i(),A(),i),W=l(()=>s("div",{class:"header-row"},null,-1)),q={class:"container mt-5"},z={class:"row"},H=l(()=>s("div",{class:"col-md-6 d-flex justify-content-center align-items-center"},[s("img",{src:M,alt:"Library 1",class:"img-fluid"})],-1)),J={class:"col-md-6"},K=l(()=>s("h1",{class:"text-center"},"Gmail Login",-1)),O=l(()=>s("p",{class:"text-center"},"Please enter your Gmail and password.",-1)),Q={class:"row mb-3"},X={class:"col-xs-12 col-sm-10 offset-sm-1 col-md-10 offset-md-1 col-lg-8 offset-lg-2 col-xl-8 offset-xl-2"},Y=l(()=>s("label",{for:"gmail",class:"form-label"},"Gmail",-1)),Z={key:0,class:"text-danger"},$={class:"row mb-3"},ss={class:"col-xs-12 col-sm-10 offset-sm-1 col-md-10 offset-md-1 col-lg-8 offset-lg-2 col-xl-8 offset-xl-2"},es=l(()=>s("label",{for:"password",class:"form-label"},"Password",-1)),os={class:"text-center"},ts=l(()=>s("button",{type:"submit",class:"btn btn-primary me-2"},"Login with gmail account",-1)),as={key:0,class:"text-danger"},ls={key:1,class:"text-success"},rs={__name:"FirebaseLogin",setup(i){const c=n(""),u=n(""),k=L(),v=N(),t=n(null),_=n(!1),p=n(!1),r=n(null),I=B(),S=async()=>{if(r.value){t.value="Gmail is incorrect.",setTimeout(()=>{t.value=null,d()},1500);return}try{const o=await T(v,c.value,u.value);p.value=!0,console.log(v.currentUser);const e=o.user.uid;await E(e,o),setTimeout(()=>{p.value=!1,d(),k.push("/userProfile")},700)}catch(o){switch(console.log(o.code),o.code){case"auth/invalid-email":t.value="Invalid email.";break;case"auth/user-not-found":t.value="No account with that email was found.";break;case"auth/wrong-password":t.value="Incorrect password.";break;default:t.value="Email or password was incorrect.";break}setTimeout(()=>{t.value=null,d()},1500)}},E=async(o,e)=>{try{const a=V(R,"users",o),h=await j(a);h.exists()?(console.log("Currently logged in user:",e.user),I.dispatch("login",{user:e.user,userData:h.data()})):console.log("No user data found.")}catch(a){console.error("Error fetching user data: ",a.message)}},g=o=>{c.value.includes("@")?r.value=null:r.value=o?'Email must include "@" symbol':null},d=()=>{c.value="",u.value="",t.value=null,r.value=null};return C(()=>{P(v,o=>{o?_.value=!0:_.value=!1})}),(o,e)=>(m(),f(G,null,[W,s("div",q,[s("div",z,[H,s("div",J,[K,O,s("form",{onSubmit:D(S,["prevent"])},[s("div",Q,[s("div",X,[Y,w(s("input",{type:"text",class:"form-control",id:"gmail","onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),onBlur:e[1]||(e[1]=()=>g(!0)),onInput:e[2]||(e[2]=()=>g(!1))},null,544),[[b,c.value]]),r.value?(m(),f("div",Z,x(r.value),1)):y("",!0)])]),s("div",$,[s("div",ss,[es,w(s("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":e[3]||(e[3]=a=>u.value=a)},null,512),[[b,u.value]])])]),s("div",os,[ts,s("button",{type:"button",class:"btn btn-secondary",onClick:d},"Clear Form"),t.value?(m(),f("div",as,x(t.value),1)):p.value?(m(),f("div",ls,"Username and password correct.")):y("",!0)])],32)])])])],64))}},ms=F(rs,[["__scopeId","data-v-855c4057"]]);export{ms as default};
