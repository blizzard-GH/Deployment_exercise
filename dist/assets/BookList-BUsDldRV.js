import{q as b,c as u,d,w as g,g as k,o as q,l as S,a as N,u as A,f as F}from"./init-B6bwGzn1.js";import{_ as C,r as D,m as P,o as f,b as m,d as t,F as x,x as I,t as _}from"./index-CLchnhFy.js";import"./index.esm2017-CJ2sl82q.js";const V={setup(){const i=D([]),l=async()=>{try{const o=prompt("Please enter the variable you want to filter:"),a=prompt("Please enter an operator (> , < , ==):"),e=prompt("Please enter a condition:"),s=isNaN(e)?e:Number(e);if(!["<",">","=="].includes(a)){alert("Invalid operator. Please use <, >, or ==");return}const v=b(u(d,"books"),g(o,a,s)),y=await k(v);if(y.empty){alert(`No results found for ${o} ${a} ${s}`);return}const E=[];y.forEach(w=>{E.push({id:w.id,...w.data()})}),i.value=E}catch(o){console.error("Error fetching books:",o),alert("Error: Failed to filter books.")}},h=async()=>{try{const o=prompt("Enter the field to order by:"),a=b(u(d,"books"),q(o,"asc")),e=await k(a),s=[];e.forEach(c=>{s.push({id:c.id,...c.data()})}),i.value=s}catch(o){console.error("Error fetching books:",o),alert("Error: Failed to order books.")}},n=async()=>{try{const o=prompt("Enter the maximum number of results:");if(isNaN(o)){alert("You must input a number.");return}const a=b(u(d,"books"),S(o)),e=await k(a),s=[];e.forEach(c=>{s.push({id:c.id,...c.data()})}),i.value=s}catch(o){console.error("Error fetching books:",o),alert("Error: Failed to limit books.")}},p=async o=>{const a=prompt("Please enter a new book name:"),e=prompt("Please enter a new book ISBN:");if(isNaN(e)){alert("ISBN must be a numeric value.");return}try{const s=N(d,"books",o);await A(s,{name:a,isbn:e}),alert("Book updated successfully.")}catch(s){console.error("Error updating book:",s),alert("There is some errors in updating the book.")}},B=async o=>{if(confirm("Are you sure you want to delete this book?"))try{await F(N(d,"books",o)),r()}catch(e){console.error("Error deleting book:",e),alert("Failed to delete the book.")}},r=async()=>{try{const o=u(d,"books"),a=await k(o),e=[];a.forEach(s=>{e.push({id:s.id,...s.data()})}),i.value=e}catch(o){console.error("Error fetching books:",o)}};return P(()=>{r()}),{books:i,refreshAllBooks:r,updateBook:p,deleteBook:B,filterBooks:l,orderBooks:h,limitBooks:n}}},L=t("h1",null,"Books list",-1),O=t("h2",null,"Filtered Result:",-1),R=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"ISBN"),t("th",null,"Actions")])],-1),M={class:"btn-action"},T=["onClick"],U=["onClick"],Y={class:"btn"};function j(i,l,h,n,p,B){return f(),m("div",null,[L,O,t("table",null,[R,t("tbody",null,[(f(!0),m(x,null,I(n.books,r=>(f(),m("tr",{key:r.id},[t("td",null,_(r.name),1),t("td",null,_(r.isbn),1),t("td",M,[t("button",{class:"btn update-btn",onClick:o=>n.updateBook(r.id)},"Update",8,T),t("button",{class:"btn delete-btn",onClick:o=>n.deleteBook(r.id)},"Delete",8,U)])]))),128))])]),t("div",Y,[t("button",{class:"btn refresh-btn",onClick:l[0]||(l[0]=(...r)=>n.refreshAllBooks&&n.refreshAllBooks(...r))},"Show all books"),t("button",{class:"btn filter-btn",onClick:l[1]||(l[1]=(...r)=>n.filterBooks&&n.filterBooks(...r))},"Filter Books"),t("button",{class:"btn filter-btn",onClick:l[2]||(l[2]=(...r)=>n.orderBooks&&n.orderBooks(...r))},"Order Books"),t("button",{class:"btn filter-btn",onClick:l[3]||(l[3]=(...r)=>n.limitBooks&&n.limitBooks(...r))},"Limit Books")])])}const J=C(V,[["render",j]]);export{J as default};
