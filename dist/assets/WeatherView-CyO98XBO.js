import{a as u}from"./axios-BimPEqV4.js";import{_ as w,o as h,b as l,d as t,w as m,e as _,v as g,f as p,t as d,F as f,p as v,g as D}from"./index-BQ7PyT97.js";const y="d69fb5e47fe65be6506187cce96b2e18",C={name:"App",data(){return{city:"",weatherData:null,hourlyForecast:[],dailyForecast:[],usedLocation:null,usedCity:null}},computed:{temperature(){return this.weatherData?Math.floor(this.weatherData.main.temp-273):null},iconUrl(){return this.weatherData?`http://api.openweathermap.org/img/w/${this.weatherData.weather[0].icon}.png`:null}},mounted(){},methods:{async fetchCurrentLocationWeather(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(async r=>{this.usedCity=!1,this.usedLocation=!0;const{latitude:a,longitude:s}=r.coords,c=`https://api.openweathermap.org/data/2.5/weather?lat=${a}&lon=${s}&appid=${y}`;await this.fetchWeatherData(c)})},async fetchWeatherData(r){try{const a=await u.get(r);this.weatherData=a.data}catch(a){console.error("Error fetching weather data.",a)}},async SearchByCity(){const r=`http://api.openweathermap.org/geo/1.0/direct?q=${this.city}&limit=1&appid=${y}`;let a,s;try{const e=await u.get(r);a=e.data[0].lat,s=e.data[0].lon}catch(e){console.error("Error fetching geolocation:",e),this.weatherData="Failed to retrieve geolocation."}const c=`https://api.openweathermap.org/data/2.5/weather?lat=${a}&lon=${s}&appid=${y}`;try{const e=await u.get(c);this.weatherData=e.data,this.usedCity=!0,this.usedLocation=!1}catch(e){console.error("Error fetching weather data:",e),this.weatherData="Failed to retrieve weather data."}}}},n=r=>(v("data-v-999dee4c"),r=r(),D(),r),b={class:"container"},W={class:"header"},E=n(()=>t("h1",null,"WEATHER APP",-1)),S=n(()=>t("label",{for:"searchByCity",class:"visually-hidden"},"Enter city name",-1)),B=n(()=>t("button",{type:"submit",class:"search-button"},"Search by City",-1)),L={key:0},k=n(()=>t("p",null," Weather based on your location: ",-1)),x=[k],F={key:1},U=n(()=>t("p",null," Weather based on city you searched: ",-1)),I=[U],M={key:2},V=["src"];function A(r,a,s,c,e,o){return h(),l(f,null,[t("div",b,[t("div",W,[E,t("form",{onSubmit:a[1]||(a[1]=m((...i)=>o.SearchByCity&&o.SearchByCity(...i),["prevent"])),class:"search-bar"},[S,_(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=i=>e.city=i),id:"searchByCity",placeholder:"Enter city name",class:"search-input"},null,512),[[g,e.city]]),B],32),t("button",{onClick:a[2]||(a[2]=(...i)=>o.fetchCurrentLocationWeather&&o.fetchCurrentLocationWeather(...i)),class:"search-button"},"Use My Location")])]),t("main",null,[e.usedLocation?(h(),l("div",L,x)):p("",!0),e.usedCity?(h(),l("div",F,I)):p("",!0),e.weatherData?(h(),l("div",M,[t("h2",null,d(e.weatherData.name)+", "+d(e.weatherData.sys.country),1),t("div",null,[t("img",{src:o.iconUrl,alt:"WeatherIcon"},null,8,V),t("p",null,d(o.temperature)+" degree celcius",1)]),t("span",null,d(e.weatherData.weather[0].description),1)])):p("",!0)])],64)}const R=w(C,[["render",A],["__scopeId","data-v-999dee4c"]]);export{R as default};
